import{j as e}from"./jsx-runtime-Nms4Y4qS.js";import{r as t}from"./index-BwDkhjyp.js";import{B,c as Ne,g as Q}from"./Box-Bo_17ADl.js";import{p as W,q as ee,l as ne,r as Re,t as H,u as te,o as se,f as oe,s as ie,b as re,c as be,d as Ce,j as we,k as ae,g as le,v as ue,w as ce,h as de,x as Fe,y as Te,F as me,m as Le,n as qe,z as Pe,A as ke}from"./floating-ui.react-BqcbUs5N.js";import{D as Se}from"./Divider-BKfKUvzF.js";import{u as Ee}from"./useControl-BksuLBKc.js";const ze="_menu_qzhll_1",Oe="_menuitem_qzhll_16",Ae="_chevron_icon_qzhll_54",Ge="_menu_icon_qzhll_64",Be="_menu_tick_qzhll_72",De="_menu_divider_qzhll_76",He="_menu_label_qzhll_80",Ue="_menu_description_qzhll_85",Ve="_menu_valuelabel_qzhll_92",v={menu:ze,menuitem:Oe,chevron_icon:Ae,menu_icon:Ge,menu_tick:Be,menu_divider:De,menu_label:He,menu_description:Ue,menu_valuelabel:Ve},k=t.forwardRef(({children:n,...i},s)=>e.jsx("div",{className:v.menu,ref:s,...i,children:n}));k.displayName="MenuContainer";k.__docgenInfo={description:"",methods:[],displayName:"MenuContainer",props:{children:{required:!0,tsType:{name:"ReactNode"},description:""},style:{required:!1,tsType:{name:"CSSProperties"},description:""}}};const U=n=>e.jsx("svg",{viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...n,children:e.jsx("g",{id:"icons/outline/chevron_right",children:e.jsx("path",{id:"Union",fillRule:"evenodd",clipRule:"evenodd",d:"M9.58578 8.00004L4.43933 2.85359L5.14644 2.14648L11 8.00004L5.14644 13.8536L4.43933 13.1465L9.58578 8.00004Z"})})});U.displayName="MenuIcon.ChevronRight";U.__docgenInfo={description:"",methods:[],displayName:"MenuIcon.ChevronRight"};const pe={flexShrink:0},Ke=()=>e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",style:pe}),Ye=()=>e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:pe,children:e.jsx("path",{className:v.menu_tick,fillRule:"evenodd",clipRule:"evenodd",d:"M13.9141 4.5L6.20707 12.207L2 7.99996L2.70711 7.29285L6.20707 10.7928L13.207 3.79289L13.9141 4.5Z"})}),F=({isNested:n,label:i,icon:s,valueLabel:o,description:p,selectable:r,selected:c})=>e.jsxs(B,{gap:"l",direction:"row",alignItems:"center",width:"100%",px:"l",py:"m",children:[r&&!c&&e.jsx(Ke,{}),r&&c&&e.jsx(Ye,{}),s!==void 0&&e.jsx("svg",{className:v.menu_icon,children:s}),e.jsxs(B,{direction:"col",alignItems:"start",width:"100%",gap:"xs",children:[e.jsx("span",{className:v.menu_label,children:i}),p&&e.jsx("span",{className:Ne(v.menu_description),children:p})]}),e.jsx(B,{typography:{familly:"label",size:"xs"},alignSelf:"start",noShrink:!0,children:o}),n&&e.jsx("svg",{className:v.chevron_icon,children:e.jsx(U,{})})]});F.displayName="MenuContent";F.__docgenInfo={description:"",methods:[],displayName:"MenuContent",props:{label:{required:!0,tsType:{name:"string"},description:""},description:{required:!1,tsType:{name:"string"},description:""},valueLabel:{required:!1,tsType:{name:"string"},description:""},icon:{required:!1,tsType:{name:"ReactNode"},description:""},isNested:{required:!1,tsType:{name:"boolean"},description:""},selectable:{required:!1,tsType:{name:"boolean"},description:""},selected:{required:!1,tsType:{name:"boolean"},description:""}}};const S=()=>e.jsx("div",{className:v.menu_divider,children:e.jsx(Se,{"aria-hidden":!0})});S.displayName="MenuDivider";S.__docgenInfo={description:"",methods:[],displayName:"MenuDivider"};const T=({label:n,...i})=>e.jsx("div",{...Q({typography:{familly:"label",size:"s",emphasized:!0},px:"l",py:"m"}),...i,children:n});T.displayName="MenuGroupLabel";T.__docgenInfo={description:"",methods:[],displayName:"MenuGroupLabel",props:{label:{required:!0,tsType:{name:"string"},description:""}}};const Xe=({label:n,children:i,...s},o)=>e.jsxs("div",{...Q({direction:"col"}),role:"group",...s,ref:o,children:[e.jsx(T,{label:n}),i]}),E=t.forwardRef(Xe);E.displayName="MenuGroup";E.__docgenInfo={description:"",methods:[],displayName:"MenuGroup",props:{label:{required:!0,tsType:{name:"string"},description:""}}};const D=t.createContext({getItemProps:()=>({}),activeIndex:null,setActiveIndex:()=>{},setHasFocusInside:()=>{},isOpen:!1}),z=t.forwardRef(({label:n,description:i,icon:s,disabled:o,valueLabel:p,selectable:r,selected:c,...f},C)=>{const _=t.useContext(D),g=W({label:o?null:n}),M=ee(),a=g.index===_.activeIndex;return e.jsx("button",{...f,ref:ne([g.ref,C]),type:"button",role:"menuitem",className:v.menuitem,tabIndex:a?0:-1,disabled:o,..._.getItemProps({onClick(I){var h;(h=f.onClick)==null||h.call(f,I),M==null||M.events.emit("click")},onFocus(I){var h;(h=f.onFocus)==null||h.call(f,I),_.setHasFocusInside(!0)}}),children:e.jsx(F,{selectable:r,selected:c,label:n,description:i,valueLabel:p,icon:s})})});z.displayName="MenuItem";z.__docgenInfo={description:"",methods:[],displayName:"MenuItem"};const Ze=qe({apply({availableWidth:n,availableHeight:i,elements:s}){let o=256;n<256&&n>120?o=n:n<=120&&(o=120),Object.assign(s.floating.style,{maxWidth:`${o}px`,maxHeight:`${i}px`,overflowY:"auto"})}}),O=t.forwardRef(({children:n,menu:i,open:s,onChange:o,defaultOpen:p,label:r,anchorRef:c,icon:f,description:C,valueLabel:_,...g},M)=>{const a=Ee({open:s,onChange:o,defaultOpen:p},{valueKey:"open",defaultValueKey:"defaultOpen",onChangeKey:"onChange",selector:b=>b}),[I,h]=t.useState(!1),[N,R]=t.useState(null),L=t.useRef([]),q=t.useRef([]),m=t.useContext(D),d=ee(),u=Re(),l=H(),x=W(),y=l!=null,{floatingStyles:fe,refs:Y,context:j}=te({nodeId:u,open:!!a.value,onOpenChange:a.onChange,placement:y?"right-start":"bottom-start",middleware:[se({mainAxis:y?0:4,alignmentAxis:y?-4:0}),oe(),ie(),Ze],whileElementsMounted:re}),ge=be(j,{enabled:y,delay:{open:75},handleClose:Ce({blockPointerEvents:!0})}),he=we(j,{event:"mousedown",toggle:!y,ignoreMouse:y}),xe=ae(j,{role:"menu"}),ve=le(j,{bubbles:!0}),_e=ue(j,{listRef:L,activeIndex:N,focusItemOnHover:!1,nested:y,onNavigate:R}),ye=ce(j,{listRef:q,onMatch:a.value?R:void 0,activeIndex:N}),{getReferenceProps:Me,getFloatingProps:Ie,getItemProps:X}=de([ge,he,xe,ve,_e,ye]);t.useEffect(()=>{if(!d)return;function b(){a.onChange(!1)}function w(J){J.nodeId!==u&&J.parentId===l&&a.onChange(!1)}return d.events.on("click",b),d.events.on("menuopen",w),()=>{d.events.off("click",b),d.events.off("menuopen",w)}},[d,u,l]),t.useEffect(()=>{a.value&&d&&d.events.emit("menuopen",{parentId:l,nodeId:u})},[d,a.value,u,l]);const je=t.useMemo(()=>({activeIndex:N,setActiveIndex:R,getItemProps:X,setHasFocusInside:h,isOpen:!!a.value}),[N,R,X,h,a.value]),Z=ne([Y.setReference,x.ref,M||c]);let G=null;const $=Me(m.getItemProps({...g,onFocus(b){var w;(w=g.onFocus)==null||w.call(g,b),h(!1),m.setHasFocusInside(!0)}}));return y?G=e.jsx("button",{type:"button",ref:Z,tabIndex:m.activeIndex===x.index?0:-1,role:"menuitem",className:v.menuitem,"data-open":a.value?"":void 0,"data-nested":"","data-focus-inside":I?"":void 0,...$,children:e.jsx(F,{isNested:y,label:r||"",description:C,valueLabel:_,icon:f})}):G=t.isValidElement(n)&&t.cloneElement(n,{ref:Z,...$}),e.jsxs(Fe,{id:u,children:[G,e.jsx(D.Provider,{value:je,children:e.jsx(Te,{elementsRef:L,labelsRef:q,children:!!a.value&&e.jsx(me,{children:e.jsx(Le,{context:j,modal:!1,returnFocus:!0,restoreFocus:!1,children:e.jsx(k,{ref:Y.setFloating,style:{...fe},...Ie(),children:e.jsx(P,{menu:i})})})})})})]})});O.displayName="MenuPrimitive";O.__docgenInfo={description:"",methods:[],displayName:"MenuPrimitive"};const A=t.forwardRef((n,i)=>H()===null?null:e.jsx(O,{...n,ref:i}));A.displayName="MenuSub";A.__docgenInfo={description:"",methods:[],displayName:"MenuSub"};function P({menu:n}){return t.isValidElement(n)?n:n.map((s,o)=>{if(s.component==="item"){const{component:p,...r}=s;return e.jsx(z,{...r},o)}if(s.component==="divider")return e.jsx(S,{},o);if(s.component==="grouplabel"){const{component:p,...r}=s;return e.jsx(T,{...r},o)}if(s.component==="group"){const{component:p,menu:r,...c}=s;return e.jsx(E,{...c,children:e.jsx(P,{menu:r})},o)}if(s.component==="sub"){const{component:p,menu:r,...c}=s;return e.jsx(A,{...c,menu:e.jsx(P,{menu:r})},o)}})}const V=({menu:n,children:i})=>{const s=t.useRef(null),[o,p]=t.useState(null),[r,c]=t.useState(!1),f=t.useRef([]),C=t.useRef(t.Children.map(i,m=>t.isValidElement(m)?m.props.label:null)),_=t.useRef(!1),{refs:g,floatingStyles:M,context:a}=te({open:r,onOpenChange:c,middleware:[se({mainAxis:5,alignmentAxis:4}),oe({fallbackPlacements:["left-start"]}),ie({padding:10})],placement:"right-start",strategy:"fixed",whileElementsMounted:re}),I=ae(a,{role:"menu"}),h=le(a),N=ue(a,{listRef:f,onNavigate:p,activeIndex:o}),R=ce(a,{enabled:r,listRef:C,onMatch:p,activeIndex:o}),{getFloatingProps:L,getItemProps:q}=de([I,h,N,R]);return t.useEffect(()=>{let m;function d(x){x.preventDefault(),g.setPositionReference({getBoundingClientRect(){return{width:0,height:0,x:x.clientX,y:x.clientY,top:x.clientY,right:x.clientX,bottom:x.clientY,left:x.clientX}}}),c(!0),clearTimeout(m),_.current=!1,m=window.setTimeout(()=>{_.current=!0},300)}function u(){_.current&&c(!1)}const l=s.current;return l&&(l.addEventListener("contextmenu",d),l.addEventListener("mouseup",u)),()=>{l&&(l.removeEventListener("mouseup",u),l.removeEventListener("contextmenu",d)),clearTimeout(m)}},[g,s]),e.jsxs(e.Fragment,{children:[e.jsx("div",{ref:s,children:i}),e.jsx(me,{children:r&&e.jsx(Pe,{lockScroll:!0,children:e.jsx("div",{className:v.menu,ref:g.setFloating,style:M,...L(),children:t.isValidElement(n)?t.Children.map(n,(m,d)=>t.cloneElement(m,q({tabIndex:o===d?0:-1,ref(u){f.current[d]=u},onClick(){var u,l;(l=(u=m.props).onClick)==null||l.call(u),c(!1)},onMouseUp(){var u,l;(l=(u=m.props).onClick)==null||l.call(u),c(!1)}}))):e.jsx(P,{menu:n})})})})]})};V.displayName="MenuContextual";V.__docgenInfo={description:"",methods:[],displayName:"MenuContextual",props:{menu:{required:!0,tsType:{name:"union",raw:'ReactNode | MenuRendererProps["menu"]',elements:[{name:"ReactNode"},{name:"union",raw:'MenuRendererProps["menu"]'}]},description:""},children:{required:!0,tsType:{name:"ReactNode"},description:""}}};const K=t.forwardRef(({children:n,...i},s)=>H()!==null?null:e.jsx(ke,{children:e.jsx(O,{ref:s,...i,children:n})}));K.displayName="MenuTrigger";K.__docgenInfo={description:"",methods:[],displayName:"MenuTrigger"};const tn={Container:k,Content:F,Contextual:V,Divider:S,Group:E,GroupLabel:T,Item:z,Sub:A,Trigger:K};export{tn as M,v as m};
