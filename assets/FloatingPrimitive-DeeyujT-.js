import{j as s}from"./jsx-runtime-CfatFE5O.js";import{j as D,k as K,l as V,o as U,f as _,m as $,u as B,a as G,n as J,g as Q,h as X,p as Y,F as Z,q as ee}from"./renderOrClone-Cb9xqVtH.js";import{r as u}from"./index-ClcD9ViR.js";import{u as te}from"./useId-CDjE3YUk.js";import{u as ne}from"./useControl-Bdsdv14P.js";const ie=u.createContext(void 0);function ae(e){const t=D(),l=K(),o=V(),n=u.useMemo(()=>({nodeId:l,parentId:o,closeAll:()=>{e!=null&&e.tree&&(t==null||t.events.emit("closeallfloating",{nodeId:l,parentId:o}))}}),[l,o]);return u.useEffect(()=>{if(e!=null&&e.tree)return e!=null&&e.onCloseAll&&(t==null||t.events.on("closeallfloating",e.onCloseAll)),()=>{e!=null&&e.onCloseAll&&(t==null||t.events.off("closeallfloating",e.onCloseAll))}},[e==null?void 0:e.onCloseAll,e==null?void 0:e.tree,t]),e!=null&&e.tree&&o===null&&(n.Provider=ie.Provider),n}function c(e,t){switch(e){case"reference":return`${t}px`;case"xxs":return"var(--sprout-container-sizing-xxs)";case"xs":return"var(--sprout-container-sizing-xs)";case"s":return"var(--sprout-container-sizing-s)";case"m":return"var(--sprout-container-sizing-m)";case"l":return"var(--sprout-container-sizing-l)";case"xl":return"var(--sprout-container-sizing-xl)";default:return e}}const g=u.forwardRef(({id:e,className:t,children:l,anchorEl:o,anchorPosition:n,content:T,initialOpen:w,placement:f="bottom-start",placementUpdate:C,forceMount:b,onMount:h,width:q,minWidth:S,maxWidth:F,open:P,onOpenChange:E,"data-testid":I,tree:v,...M},H)=>{const j=te(e);let x=o;!o&&n&&(x={getBoundingClientRect(){return{width:0,height:0,x:n.left,y:n.top,top:n.top,right:n.left,bottom:n.top,left:n.left}}});const m=[U(4)],a=ne({open:P,onOpenChange:E,initialOpen:w??!1},{defaultValueKey:"initialOpen",valueKey:"open",onChangeKey:"onOpenChange",selector:i=>i}),p=ae({tree:v,onCloseAll:()=>a.onChange(!1)});C&&m.push(_({crossAxis:f.includes("-"),fallbackAxisSideDirection:"end",padding:4})),m.push($({apply({rects:i,elements:O,availableHeight:W}){Object.assign(O.floating.style,{maxHeight:`${W}px`,width:c(q,i.reference.width),minWidth:c(S,i.reference.width),maxWidth:c(F,i.reference.width)})}}));const r=B({nodeId:p.nodeId,placement:f,open:!!a.value,onOpenChange:i=>{a.onChange(i)},elements:{reference:x},whileElementsMounted:G,middleware:m}),k=J(r.context,{enabled:a.value==null}),A=Q(r.context),{getReferenceProps:L,getFloatingProps:R}=X([k,A]);let d=null;const N=R(),y=Y([H,r.refs.setFloating]);(b||a.value)&&(d=s.jsx(Z,{children:s.jsx("div",{"data-testid":I||"sprout-floating",ref:i=>{y&&y(i),h&&h(r.refs.reference.current,i)},...N,...M,style:a.value?r.floatingStyles:{display:"none"},className:t,id:j,children:T})})),v&&(d=s.jsx(ee,{id:p.nodeId,children:d}));const z=l&&u.isValidElement(l)?l:s.jsx("span",{});return s.jsxs(s.Fragment,{children:[l&&u.cloneElement(z,{...L(),onClick:()=>{a.onChange(!a.value,p)},ref:r.refs.setReference,"data-state":a.value?"open":"closed"}),d]})});g.displayName="FloatingPrimitive";g.__docgenInfo={description:`This component is a primitive and it is headless.
The role is to manage the HTML structure of an absolute positioned element.
The element can receive any content, class and attributes.
It doen't manage any thing else.`,methods:[],displayName:"FloatingPrimitive",props:{content:{required:!0,tsType:{name:"ReactNode"},description:""},id:{required:!1,tsType:{name:"string"},description:""},children:{required:!1,tsType:{name:"ReactNode"},description:""},anchorEl:{required:!1,tsType:{name:"HTMLElement"},description:""},anchorPosition:{required:!1,tsType:{name:"signature",type:"object",raw:"{ top: number; left: number }",signature:{properties:[{key:"top",value:{name:"number",required:!0}},{key:"left",value:{name:"number",required:!0}}]}},description:`This is the position that may be used to set the position of the popover.
The coordinates are relative to the application's client area.`},placement:{required:!1,tsType:{name:"Placement"},description:"",defaultValue:{value:'"bottom-start"',computed:!1}},placementUpdate:{required:!1,tsType:{name:"boolean"},description:"If true the floating element placement can be updated to keep it in view."},width:{required:!1,tsType:{name:"union",raw:'"reference" | "xxs" | "xs" | "s" | "m" | "l" | "xl" | CSSProperties["width"]',elements:[{name:"literal",value:'"reference"'},{name:"literal",value:'"xxs"'},{name:"literal",value:'"xs"'},{name:"literal",value:'"s"'},{name:"literal",value:'"m"'},{name:"literal",value:'"l"'},{name:"literal",value:'"xl"'},{name:'CSSProperties["width"]',raw:'CSSProperties["width"]'}]},description:""},minWidth:{required:!1,tsType:{name:"union",raw:'"reference" | "xxs" | "xs" | "s" | "m" | "l" | "xl" | CSSProperties["width"]',elements:[{name:"literal",value:'"reference"'},{name:"literal",value:'"xxs"'},{name:"literal",value:'"xs"'},{name:"literal",value:'"s"'},{name:"literal",value:'"m"'},{name:"literal",value:'"l"'},{name:"literal",value:'"xl"'},{name:'CSSProperties["width"]',raw:'CSSProperties["width"]'}]},description:""},maxWidth:{required:!1,tsType:{name:"union",raw:'"reference" | "xxs" | "xs" | "s" | "m" | "l" | "xl" | CSSProperties["width"]',elements:[{name:"literal",value:'"reference"'},{name:"literal",value:'"xxs"'},{name:"literal",value:'"xs"'},{name:"literal",value:'"s"'},{name:"literal",value:'"m"'},{name:"literal",value:'"l"'},{name:"literal",value:'"xl"'},{name:'CSSProperties["width"]',raw:'CSSProperties["width"]'}]},description:""},forceMount:{required:!1,tsType:{name:"boolean"},description:"define if the content is mount when not displayed"},onMount:{required:!1,tsType:{name:"signature",type:"function",raw:"(reference?: HTMLElement, floating?: HTMLElement) => void",signature:{arguments:[{type:{name:"HTMLElement"},name:"reference"},{type:{name:"HTMLElement"},name:"floating"}],return:{name:"void"}}},description:`This callback is called multiple times controlled by react itself under the reference callback.
Helpful to manage react state or query HTML elements.
@param reference HTMLElement use to position the floating element
@param floating HTMLElement containing the floating content`},initialOpen:{required:!1,tsType:{name:"boolean"},description:`Determines if the floating element should have padding or not.
@default true`},open:{required:!1,tsType:{name:"boolean"},description:"control if the popover is displayed or not"},onOpenChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(open: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"open"}],return:{name:"void"}}},description:""},className:{required:!1,tsType:{name:"string"},description:""},tree:{required:!1,tsType:{name:"boolean"},description:"describe the fact that this component will be part of a tree of floating elements"}}};export{g as F,ae as u};
