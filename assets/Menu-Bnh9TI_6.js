var W=Object.defineProperty;var Z=(n,r,t)=>r in n?W(n,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[r]=t;var I=(n,r,t)=>Z(n,typeof r!="symbol"?r+"":r,t);import{j as e}from"./jsx-runtime-CfatFE5O.js";import{r as a}from"./index-ClcD9ViR.js";import{B as q,c as X,g as B}from"./Box-25vWnmJ9.js";import{D as Y}from"./Divider-Dv0yWk4k.js";import{t as $,v as J,p as H,r as Q}from"./renderOrClone-Cb9xqVtH.js";import{L as ee}from"./list-DwdHZYh1.js";import{u as E,F as K}from"./FloatingPrimitive-DeeyujT-.js";import{u as ne}from"./useId-CDjE3YUk.js";import{u as z}from"./useControl-Bdsdv14P.js";import{S as A}from"./Skeleton-BJic6b4p.js";const te="_menu_2m7ke_1",re="_menuitem_2m7ke_16",se="_chevron_icon_2m7ke_63",ie="_menu_icon_2m7ke_77",oe="_menu_tick_2m7ke_85",ae="_menu_divider_2m7ke_89",ue="_menu_label_2m7ke_93",le="_menu_description_2m7ke_98",ce="_menu_valuelabel_2m7ke_105",m={menu:te,menuitem:re,chevron_icon:se,menu_icon:ie,menu_tick:oe,menu_divider:ae,menu_label:ue,menu_description:le,menu_valuelabel:ce},G=a.forwardRef(({children:n,...r},t)=>e.jsx("div",{className:m.menu,ref:t,...r,children:n}));G.displayName="MenuContainer";G.__docgenInfo={description:"",methods:[],displayName:"MenuContainer",props:{children:{required:!0,tsType:{name:"ReactNode"},description:""},style:{required:!1,tsType:{name:"CSSProperties"},description:""}}};const F=n=>e.jsx("svg",{viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...n,children:e.jsx("g",{id:"icons/outline/chevron_right",children:e.jsx("path",{id:"Union",fillRule:"evenodd",clipRule:"evenodd",d:"M9.58578 8.00004L4.43933 2.85359L5.14644 2.14648L11 8.00004L5.14644 13.8536L4.43933 13.1465L9.58578 8.00004Z"})})});F.displayName="MenuIcon.ChevronRight";F.__docgenInfo={description:"",methods:[],displayName:"MenuIcon.ChevronRight"};const U={flexShrink:0},de=()=>e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",style:U}),pe=()=>e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:U,children:e.jsx("path",{className:m.menu_tick,fillRule:"evenodd",clipRule:"evenodd",d:"M13.9141 4.5L6.20707 12.207L2 7.99996L2.70711 7.29285L6.20707 10.7928L13.207 3.79289L13.9141 4.5Z"})}),S=({isNested:n,label:r,icon:t,valueLabel:s,description:o,selectable:i,selected:l})=>e.jsxs(q,{gap:"m",direction:"row",alignItems:"center",width:"100%",px:"l",py:"m",style:{pointerEvents:"none"},children:[i&&!l&&e.jsx(de,{}),i&&l&&e.jsx(pe,{}),t!==void 0&&e.jsx("svg",{className:m.menu_icon,children:t}),e.jsxs(q,{direction:"col",alignItems:"start",width:"100%",gap:"xs",children:[e.jsx("span",{className:m.menu_label,children:r}),o&&e.jsx("span",{className:X(m.menu_description),children:o})]}),e.jsx(q,{typography:{familly:"label",size:"xs"},alignSelf:"start",noShrink:!0,children:s}),n&&e.jsx("svg",{className:m.chevron_icon,children:e.jsx(F,{})})]});S.displayName="MenuContent";S.__docgenInfo={description:"",methods:[],displayName:"MenuContent",props:{label:{required:!0,tsType:{name:"string"},description:""},description:{required:!1,tsType:{name:"string"},description:""},valueLabel:{required:!1,tsType:{name:"string"},description:""},icon:{required:!1,tsType:{name:"ReactNode"},description:""},isNested:{required:!1,tsType:{name:"boolean"},description:""},selectable:{required:!1,tsType:{name:"boolean"},description:""},selected:{required:!1,tsType:{name:"boolean"},description:""}}};function me({onCloseAll:n,...r},t){const s=E({tree:!0,onCloseAll:n});return s.Provider?e.jsx($,{children:e.jsx(s.Provider,{value:s,children:e.jsx(K,{tree:!0,...r,ref:t})})}):e.jsx(K,{tree:!0,...r})}const C=a.forwardRef(me);C.displayName="FloatingTreePrimitive";C.__docgenInfo={description:"",methods:[],displayName:"FloatingTreePrimitive",props:{onCloseAll:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};const L=()=>e.jsx("div",{className:m.menu_divider,children:e.jsx(Y,{"aria-hidden":!0})});L.displayName="MenuDivider";L.__docgenInfo={description:"",methods:[],displayName:"MenuDivider"};const N=({label:n,...r})=>e.jsx("div",{...B({typography:{familly:"label",size:"s",emphasized:!0},px:"l",py:"m"}),...r,children:n});N.displayName="MenuGroupLabel";N.__docgenInfo={description:"",methods:[],displayName:"MenuGroupLabel",props:{label:{required:!0,tsType:{name:"string"},description:""}}};const fe=({label:n,children:r,...t},s)=>e.jsxs("div",{...B({direction:"col"}),role:"group",...t,ref:s,children:[e.jsx(N,{label:n}),r]}),k=a.forwardRef(fe);k.displayName="MenuGroup";k.__docgenInfo={description:"",methods:[],displayName:"MenuGroup",props:{label:{required:!0,tsType:{name:"string"},description:""}}};const ge=a.createContext({getItemProps:()=>({}),activeIndex:null,setActiveIndex:()=>{},setHasFocusInside:()=>{},isOpen:!1}),w=a.forwardRef(({label:n,description:r,icon:t,disabled:s,valueLabel:o,selectable:i,selected:l,isNested:c,...f},x)=>{const y=a.useContext(ge),v=J({label:s?null:n}),p=v.index===y.activeIndex;return e.jsx("button",{...f,ref:H([v.ref,x]),"aria-haspopup":c?"menu":void 0,type:"button",className:m.menuitem,tabIndex:p?0:-1,role:i?"menuitemcheckbox":"menuitem","aria-checked":i?l?"true":"false":void 0,disabled:s,children:e.jsx(S,{isNested:c,selectable:i,selected:l,label:n,description:r,valueLabel:o,icon:t})})});w.displayName="MenuItem";w.__docgenInfo={description:"",methods:[],displayName:"MenuItem",props:{label:{required:!0,tsType:{name:"string"},description:""},description:{required:!1,tsType:{name:"string"},description:""},valueLabel:{required:!1,tsType:{name:"string"},description:""},icon:{required:!1,tsType:{name:"ReactNode"},description:""},isNested:{required:!1,tsType:{name:"boolean"},description:""},selectable:{required:!1,tsType:{name:"boolean"},description:""},selected:{required:!1,tsType:{name:"boolean"},description:""},disabled:{required:!1,tsType:{name:"boolean"},description:""}}};class he extends ee{constructor(t){super(t);I(this,"trigger");I(this,"hasSubMenu");I(this,"getParentMenuTrigger");this.orientation="vertical",this.hasSubMenu=t.hasSubMenu,this.getParentMenuTrigger=t.getParentMenuTrigger}onKeyDownHandler(t){super.onKeyDownHandler(t);const s=t.target;if(t.key==="ArrowRight"&&this.hasSubMenu&&this.hasSubMenu(s)&&s.click(),t.key==="ArrowLeft"&&this.getParentMenuTrigger){const o=this.getParentMenuTrigger(s);o&&o.click()}}}function xe(n){const[r,t]=a.useState();return a.useMemo(()=>{if(r)return r;const o=new he(n);return t(o),o},[n.getAllItems,n.getSelectedItems,n.loop])}function ye(n){return n.querySelectorAll('[role^="menuitem"]:not([disabled])')}function ve(n){return n.querySelectorAll('[role^="menuitem"][aria-selected=true]:not([disabled]')}function _e(n){const r=n.closest('[role="menu"]');if(r){const t=r.getAttribute("id");return document.querySelector(`[role^="menuitem"][aria-controls="${t}"]`)}return null}function Me(n){return n.getAttribute("aria-haspopup")==="menu"}const P=a.forwardRef(({id:n,menu:r,onClick:t,open:s,defaultOpen:o,onOpenChange:i,placement:l,children:c,...f},x)=>{const y=a.useRef(null),v=H([y,x]),p=ne(n),_=z({open:s,onOpenChange:i,initialOpen:o??!1},{defaultValueKey:"initialOpen",valueKey:"open",onChangeKey:"onOpenChange",selector:d=>d}),g=!!_.value,u=_.onChange,[j,M]=a.useState(!1),b=E({tree:!0,onCloseAll:()=>{u(!1)}}),T=xe({getAllItems:ye,getSelectedItems:ve,hasSubMenu:Me,getParentMenuTrigger:_e});return a.useEffect(()=>()=>{T.setElement()},[j]),e.jsx(C,{ref:v,...f,id:p,open:g,onOpenChange:d=>{var h;d!==g&&u(d),d||(M(!1),(h=T.trigger)==null||h.focus()),i&&i(d)},onMount:(d,h)=>{M(!0),T.trigger=d,T.setElement(h),g&&j&&T.focusOnFirst()},onClick:d=>{var h;d.target.getAttribute("aria-haspopup")!=="menu"&&(b&&b.closeAll(),u(!1),M(!1),(h=T.trigger)==null||h.focus(),t&&t(d))},initialOpen:o,placement:l||"bottom-start",role:"menu",minWidth:"reference",maxWidth:"xxs",className:m.menu,content:e.jsx(R,{menu:r}),children:Q(c,{"aria-haspopup":"menu","aria-expanded":g?"true":"false","aria-controls":p})})});P.displayName="MenuTrigger";P.__docgenInfo={description:"",methods:[],displayName:"MenuTrigger",props:{defaultOpen:{required:!1,tsType:{name:'intersection["initialOpen"]',raw:'FloatingPrimitiveProps["initialOpen"]'},description:""}}};const O=({menu:n,...r})=>{const t=document.dir==="rtl";return e.jsx(P,{menu:n,placement:t?"left":"right",children:e.jsx(w,{...r,isNested:!0})})};O.__docgenInfo={description:"",methods:[],displayName:"MenuSub",props:{label:{required:!0,tsType:{name:"string"},description:""},description:{required:!1,tsType:{name:"string"},description:""},valueLabel:{required:!1,tsType:{name:"string"},description:""},icon:{required:!1,tsType:{name:"ReactNode"},description:""},isNested:{required:!1,tsType:{name:"boolean"},description:""},selectable:{required:!1,tsType:{name:"boolean"},description:""},selected:{required:!1,tsType:{name:"boolean"},description:""},disabled:{required:!1,tsType:{name:"boolean"},description:""}}};function R({menu:n}){return a.isValidElement(n)?n:n.map((t,s)=>{if(t.component==="item"){const{component:o,...i}=t;return e.jsx(w,{...i},s)}if(t.component==="divider")return e.jsx(L,{},s);if(t.component==="grouplabel"){const{component:o,...i}=t;return e.jsx(N,{...i},s)}if(t.component==="group"){const{component:o,menu:i,...l}=t;return e.jsx(k,{...l,children:e.jsx(R,{menu:i})},s)}if(t.component==="sub"){const{component:o,menu:i,...l}=t;return e.jsx(O,{...l,menu:e.jsx(R,{menu:i})},s)}})}const D=({onClick:n,onOpenChange:r,open:t,anchorPosition:s,menu:o,children:i,...l})=>{const c=a.useRef(null),[f,x]=a.useState(null),y=z({open:t,onOpenChange:r,initialOpen:!1},{defaultValueKey:"initialOpen",valueKey:"open",onChangeKey:"onOpenChange",selector:u=>u}),v=!!y.value,p=y.onChange,_=a.useRef(!1),g=E({tree:!0,onCloseAll:()=>{p(!1)}});return a.useEffect(()=>{let u;function j(b){b.preventDefault(),x(b),p(!0),r&&r(!0,b),clearTimeout(u),_.current=!1,u=window.setTimeout(()=>{_.current=!0},300)}function M(){_.current&&(p(!1),x(null),r&&r(!1))}return c.current&&(c.current.addEventListener("contextmenu",j),c.current.addEventListener("mouseup",M)),()=>{c.current&&(c.current.removeEventListener("mouseup",M),c.current.removeEventListener("contextmenu",j)),clearTimeout(u)}},[c]),e.jsxs(e.Fragment,{children:[i?e.jsx("div",{ref:c,children:i}):null,e.jsx(C,{open:v,anchorPosition:s||(f?{left:f.clientX,top:f.clientY}:void 0),onOpenChange:u=>{p(u),r&&r(u,f||void 0)},onClick:u=>{u.target.getAttribute("aria-haspopup")!=="menu"&&(g&&g.closeAll(),p(!1),n&&n(u))},placement:"bottom-start",role:"menu",content:o&&e.jsx(R,{menu:o}),width:"fit-content",maxWidth:"s",className:m.menu,...l})]})};D.displayName="MenuContextual";D.__docgenInfo={description:"",methods:[],displayName:"MenuContextual",props:{menu:{required:!1,tsType:{name:"union",raw:'ReactNode | MenuRendererProps["menu"]',elements:[{name:"ReactNode"},{name:"union",raw:'MenuRendererProps["menu"]'}]},description:""},children:{required:!1,tsType:{name:"ReactNode"},description:""},onOpenChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(open: boolean, event?: MouseEvent) => void",signature:{arguments:[{type:{name:"boolean"},name:"open"},{type:{name:"MouseEvent"},name:"event"}],return:{name:"void"}}},description:""}}};function V(){return e.jsxs(q,{gap:"m",direction:"col",children:[e.jsx(A,{variant:"rectangle",width:"150px",height:"22px"}),e.jsx(A,{variant:"rectangle",width:"100px",height:"22px"}),e.jsx(A,{variant:"rectangle",width:"200px",height:"22px"})]})}V.__docgenInfo={description:"",methods:[],displayName:"MenuSkeleton"};const ke={Container:G,Content:S,Contextual:D,Divider:L,Group:k,GroupLabel:N,Item:w,Sub:O,Trigger:P,Skeleton:V};export{ke as M,m};
